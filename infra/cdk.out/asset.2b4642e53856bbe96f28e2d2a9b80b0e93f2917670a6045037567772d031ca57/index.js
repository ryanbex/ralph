"use strict";var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var i=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var y=(o,e)=>{for(var t in e)c(o,t,{get:e[t],enumerable:!0})},C=(o,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of i(e))!l.call(o,n)&&n!==t&&c(o,n,{get:()=>e[n],enumerable:!(a=d(e,n))||a.enumerable});return o};var m=o=>C(c({},"__esModule",{value:!0}),o);var u={};y(u,{handler:()=>P});module.exports=m(u);var s=require("@aws-sdk/client-dynamodb"),r=require("@aws-sdk/lib-dynamodb"),I=new s.DynamoDBClient({}),N=r.DynamoDBDocumentClient.from(I),D=process.env.CONNECTIONS_TABLE,P=async o=>{let e=o.requestContext.connectionId;console.log(`[DISCONNECT] connectionId=${e}`);try{return await N.send(new r.DeleteCommand({TableName:D,Key:{connectionId:e}})),{statusCode:200,body:"Disconnected"}}catch(t){return console.error("[DISCONNECT] Error:",t),{statusCode:500,body:"Failed to disconnect"}}};0&&(module.exports={handler});
